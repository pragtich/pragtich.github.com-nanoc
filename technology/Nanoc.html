<!DOCTYPE HTML>
<html lang="en">
<!-- Set up & clean variables --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Joris Pragt’s site – Pragtich: Making a personal website using Nanoc</title>
<link rel="stylesheet" type="text/css" href="../stylesheet.css" media="screen">
<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="Pragtich blog
    feed" href="http://members.home.nl/pragtich/atom.xml">
</head>
<body>

    <article><!-- If there's no item title; we print no header, even if
           there's a date. --><header><hgroup><img src="Nanoc_index.jpg"><h1 class="itemtitle">Making a personal website using Nanoc</h1>

          
          <h2 class="itemdate">November 12, 2011</h2>
          



        </hgroup></header><summary>
             How I used Nanoc to create this personal webpage…</summary><bodytext><p>I have previously played around with different systems for creating a personal webpage. Working in HTML quickly frustrated me because it is in essence illegible. Also, it made no sense to me to have to repeat all the layout and navigation stuff in each page.</p>

<p>My first real attempt at a personal page already had the design that is close to what is here now. I made it using Apache Cocoon, and the abstraction level really appealed to me. However, in practical use it turned out to be way too heavy on the server. The once-supercoputer server I was using (a SGI Indigo) could not handle the java. I ended up using a web spider to convert everything into static pages, not really a satisfactory approach.</p>

<p>Now, years later, i am playing with Nanoc. It is one of a range of static webpage generation tools that have sprouted since the Ruby programming language has become popular. </p>

<p>Nanoc is reasonably well documented (the objects very well, the use a bit less detailed), and there is a community site that includes several examples of web sites which are a great help. To set up my site, I used two main sources: The Nanoc website and the Schof.org site by Mark Schofield. Especially the practical example of schof.org has been a great help.</p>

<p><img src="nanoc-ss.jpg" alt="Screenshot of nanoc running"></p>

<h1 id="an-rss-feed-for-the-site">An RSS feed for the site</h1>

<p>Of course, a blog should have a RSS feed. Even though you have no readers yet… One never knows when it will be useful.</p>

<p>So, I am trying to get the Blogging helper RSS stuff to work. The [[documentation][http://nanoc.stoneship.org/docs/api/3.1/Nanoc3/Helpers/Blogging.html#atom_feed-instance_method]] shows that we need to set up some stuff. I did just that, although I must say I really dislike the <code>excerpt</code> tag, because of its American English brutality. I will try to come up with a way to use <code>summary</code> instead.</p>

<pre><code>base_url: 'http://http://members.home.nl/pragtich'
</code></pre>

<p>Created a <code>content/atom.xml</code> with the contents:</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;feed xmlns="http://www.w3.org/2005/Atom"&gt;
</code></pre>
<id>http://members.home.nl/pragtich/</id><title>Making a personal website using Nanoc</title>
<updated>2012-07-18T22:00:00Z</updated><link rel="alternate" href="http://members.home.nl/pragtich/">
<link rel="self" href="http://members.home.nl/pragtich/technology/Nanoc.html">
<author><name>Joris Pragt</name><uri>http://members.home.nl/pragtich</uri></author><entry><id>tag:members.home.nl,2012-07-19:/pragtich/technology/Compiling gstreamer for C920 webcam.html</id><title type="html">Compiling a modified GStreamer for the C920 webcam</title>
<published>2012-07-18T22:00:00Z</published><updated>2012-07-18T22:00:00Z</updated><link rel="alternate" href="http://members.home.nl/pragtich/technology/Compiling%20gstreamer%20for%20C920%20webcam.html">
<content type="html">&lt;h1 id=”satisfying-build-requirements”&gt;Satisfying build requirements&lt;/h1&gt;
&lt;p&gt;## Packages&lt;/p&gt;

&lt;p&gt;Basically, a matter of &lt;code&gt;make prereq&lt;/code&gt; and &lt;code&gt;sudo fink install xxx&lt;/code&gt; until
all dependencies were met.&lt;/p&gt;

&lt;h2 id=”filesystem”&gt;Filesystem&lt;/h2&gt;

&lt;p&gt;The OpenWRT buildroot needs a case-sensitive filesystem and tells you
that:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Build dependency: OpenWrt can only be built on a case-sensitive
filesystem
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The default OS X system is not case sensitive. There is a simple
solution: create a separate disk image. As I found
&lt;a href=”https://forum.openwrt.org/viewtopic.php?id=20914”&gt;here&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hdiutil create -size 2048m -fs HFSX -volname openwrt openwrt
Doubleclick the dmg
cd /Volumes/openwrt/
tar cf - ~/openwrt | tar xfp -
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Also, I found the following tips that may be necessary (?) in the same
forum topic:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;A couple notes on using MacOS X as a build environment that I’ve found so far:

Package names for “port” that you may need:
* gmake
* gawk
* gtar
* coreutils
* findutils
* getopt
* wget

(There may be others, I can’t easily do a “clean install” on Mac)

$ export PATH=”/opt/local/bin:$PATH”   # so that the GNU versions get picked up



You may need to

$ chmod +x scripts/md5sum    # appears to be “fixed” in current trunk


As suggested by marca, update XTools and re-symlink (gcov not required, AFAIK, but consistency is good)

/usr/bin/g++ -&amp;gt; g++-4.2
/usr/bin/gcc -&amp;gt; gcc-4.2
/usr/bin/gcov -&amp;gt; gcov-4.2


If you want to build the documentation, MacTeX will do it – http://www.tug.org/mactex/
(though there is no BSD-make wrapper in that directory, so gmake in the docs directory)
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=”compiling”&gt;Compiling&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;make menuconfig

# selected ar7xx, minimal profile, toolchain and sdk

make tools/install
make toolchain/install
&lt;/code&gt;&lt;/pre&gt;
</content></entry><entry><id>tag:members.home.nl,2012-07-13:/pragtich/technology/Aquamacs Notes.html</id><title type="html">Some notes on using Aquamacs</title>
<published>2012-07-12T22:00:00Z</published><updated>2012-07-12T22:00:00Z</updated><link rel="alternate" href="http://members.home.nl/pragtich/technology/Aquamacs%20Notes.html">
<content type="html">&lt;p&gt;Aquamacs is a great text editor for OS X. It does, however, have its
idiosyncrises. So, here I am keeping notes on what worked for me.&lt;/p&gt;

&lt;h1 id=”documentation”&gt;Documentation&lt;/h1&gt;

&lt;p&gt;First of all, Google is your friend. But there is also some
&lt;a href=”http://www.emacswiki.org/emacs/AquamacsFAQ”&gt;good documentation on the EmacsWiki site&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=”configuration-file”&gt;Configuration file&lt;/h1&gt;

&lt;p&gt;The Aquamacs does not use the standard &lt;code&gt;.emacs&lt;/code&gt; locations. Instead,
the stuff is hidden in the library. For details, check
&lt;a href=”http://www.emacswiki.org/emacs/AquamacsFAQ”&gt;the Aquamacs FAQ&lt;/a&gt;. I tend to edit the files in
&lt;code&gt;~/Library/Preferences/Aquamacs Emacs/&lt;/code&gt; by hand, especially &lt;code&gt;customizations.el&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;To be honest, this exasperates me so much, that I have learned to use
the &amp;lsquo;customization&amp;rsquo; tool.&lt;/p&gt;

&lt;h1 id=”emacsclient”&gt;Emacsclient&lt;/h1&gt;

&lt;p&gt;In using Aquamacs, I wanted to start using it as the default
editor. Some research was needed.&lt;/p&gt;

&lt;h2 id=”setup”&gt;Setup&lt;/h2&gt;

&lt;p&gt;I edited &lt;code&gt;.bash_profile&lt;/code&gt; and added the following`;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# editor setup
export EDITOR=’/Applications/Aquamacs.app/Contents/MacOS/bin/emacsclient’
export ALTERNATE_EDITOR=vi
alias e=$EDITOR
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Probably I should research how to use ALTERNATE_EDITOR to startup
Aquamacs, but I want to be sure that I am actually on a windowing
station to do that &amp;ndash; too lazy at the moment. Maybe later. As it is
now, Aquamacs will be used when it&amp;rsquo;s running (like when I&amp;rsquo;m working on
this website), and vi will be used otherwise. &lt;/p&gt;

&lt;p&gt;It also sets up a shorthand editing alias &lt;code&gt;e&lt;/code&gt; for my convenience.&lt;/p&gt;

&lt;p&gt;To get the server to automatically load, I used the customization
interface (Aquamacs -&amp;gt; Preferences, Interfacing to external
utilities, Server) to enable &amp;lsquo;Server Mode&amp;rsquo;. That way, any time
Aquamacs starts up, it will be listening.&lt;/p&gt;

&lt;h2 id=”using”&gt;Using&lt;/h2&gt;

&lt;p&gt;Ending an editing session that was started this way, goes as follows:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C-x #
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Many people rebind this key to something like &lt;code&gt;C-c c&lt;/code&gt; to better match
other applications like GNUS or VCS. Maybe I will too, some day.&lt;/p&gt;
</content></entry><entry><id>tag:members.home.nl,2012-07-13:/pragtich/kippycam/Openwrt connection checking.html</id><title type="html">Keeping Openwrt online using DHCP</title>
<published>2012-07-12T22:00:00Z</published><updated>2012-07-12T22:00:00Z</updated><link rel="alternate" href="http://members.home.nl/pragtich/kippycam/Openwrt%20connection%20checking.html">
<content type="html">&lt;p&gt;I noticed, when
&lt;a href=”network-layout.html”&gt;installing the WiFi network bridge to the garden shed&lt;/a&gt;,
that the DHCP client does not reconnect when the connection has been
lost. It just sits there (don&amp;rsquo;t know when it would reconnect, maybe
when the lease expires?) unconnected. For my purpose, that&amp;rsquo;s not very
satisfying, as I need the connection to be robust. &lt;/p&gt;

&lt;p&gt;Since I had worked with &lt;code&gt;monit&lt;/code&gt; before, I figured this would be a
great way to periodically check the state of the connection and
re-enable it when it has dropped out. At a later date, &lt;code&gt;monit&lt;/code&gt; could
also turn out to be helpful in making sure that all other services on
the router remain healthy. &lt;/p&gt;

&lt;h1 id=”installing–configuring”&gt;Installing &amp;amp; configuring&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;opkg update

# I am getting the packages from my local copy of the trunk, just
to have it all be consistent. That probably is only critical for
the kernel modules packages, but let’s do it for sake of
simplicity

opkg install monit

vi /etc/monitrc
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I added some sensible settings from the template that is in
&lt;code&gt;/etc/monitrc&lt;/code&gt;, mainly to start as a daemon, put the work files in
&lt;code&gt;/tmp&lt;/code&gt; and set the frequency of the checks. And the check for a
connection:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;check host kiprouter with address 10.0.0.4                                     
    if failed icmp type echo count 3 with timeout 3 seconds then
	exec “/etc/init.d/network restart”
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then to enable and start monit:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/etc/init.d/monit enable
/etc/init.d/monit start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Testing results later&amp;hellip;&lt;/p&gt;
</content></entry><entry><id>tag:members.home.nl,2012-07-04:/pragtich/technology/Nanoc-Github-Pages.html</id><title type="html">Using Nanoc to fill Github Pages</title>
<published>2012-07-03T22:00:00Z</published><updated>2012-07-03T22:00:00Z</updated><link rel="alternate" href="http://members.home.nl/pragtich/technology/Nanoc-Github-Pages.html">
<content type="html">&lt;p&gt;Started out with an already-existing nanoc folder.&lt;/p&gt;

&lt;p&gt;I Installed git for mac using the standard installer supplied on
git-scm.com (version 1.7.11.1) and created an account on github.&lt;/p&gt;

&lt;p&gt;Created a repository called &lt;username&gt;.github.com&lt;/username&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=”http://schmurfy.github.com/2011/05/06/create_your_github_user_page_with_nanoc.html”&gt;Followed (approximately) this link&lt;/a&gt;
although I made a few changes.&lt;/p&gt;

&lt;p&gt;First of all, I already had a checkin, so could skip the first code
box. I did rename the &lt;code&gt;master&lt;/code&gt; branch to &lt;code&gt;source&lt;/code&gt; and add a second remote:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git branch -m master source
git remote add pages https://github.com/&amp;lt;user&amp;gt;/&amp;lt;user&amp;gt;.github.com.git
git push -u pages source
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The output sounds promising:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Counting objects: 102, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (95/95), done.
Writing objects: 100% (102/102), 237.00 KiB, done.
Total 102 (delta 19), reused 0 (delta 0)
To https://github.com/pragtich/pragtich.github.com.git
 * [new branch]      source -&amp;gt; source
Branch source set up to track remote branch source from pages.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;source&lt;/code&gt; branch now holds the entire page source (including
any output).&lt;/p&gt;

&lt;p&gt;Now I followed the cloning instructions quite rigidly (because I do
not really understand them yet).&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# fetch a working copy of your repository
  $ git clone https://github.com/&amp;lt;user&amp;gt;/&amp;lt;user&amp;gt;.github.com.git output
  $ cd output
# create the isolated branch
  $ git symbolic-ref HEAD refs/heads/master
  $ rm .git/index
  $ git clean -fdx
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then recreate the output files:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cd ..
nanoc compile
git commit -a
git push pages
cd output/
git add *
git commit
git push origin master
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;git push origin master&lt;/code&gt; part was tricky to figure out to me. It
pushes the output folder&amp;rsquo;s content to it&amp;rsquo;s set remote origin (which
came from the &lt;code&gt;clone&lt;/code&gt;, I assume. Adding the &lt;code&gt;master&lt;/code&gt; determines that
the files are going into the &lt;code&gt;master&lt;/code&gt; branch (which is the leading
branch for the GitHub Pages).&lt;/p&gt;

&lt;p&gt;Finally, I did:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; touch .nojekyll
 git add .nojekyll
 git commit
 
 vi .gitignore       #add .nojekyll to this file
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This should put a .nojekyll file into the repository, that will not
get clobbered when I nuke the output/ folder (I hope).&lt;/p&gt;

&lt;p&gt;So now, the workflow is:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Update files in the &lt;code&gt;content/&lt;/code&gt; folder&lt;/li&gt;
  &lt;li&gt;Compile and upload to test server (I use a rake file)&lt;/li&gt;
  &lt;li&gt;Verify results&lt;/li&gt;
  &lt;li&gt;In the source folder: &lt;code&gt;git commit -a; git push pages&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;In the output folder: &lt;code&gt;git commit -a; git push origin master&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;TODO&lt;/strong&gt;: Add a rakefile to auto-push both the source and the output once
I have a satisfactory build.&lt;/p&gt;

&lt;h1 id=”pushing-using-nanoc-git”&gt;Pushing using nanoc-git&lt;/h1&gt;

&lt;p&gt;I am playing with nanoc-git. I found it through a Google search. It&amp;rsquo;s
maker claims it to be alpha-level software. Let&amp;rsquo;s see. It lives
&lt;a href=”https://github.com/cspicker/nanoc-git”&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The script does rebuild the output folder implicitly. So it breaks the
prototyping build thing that I have described above. Maybe I&amp;rsquo;ll try to
rewrite it to allow some kind of prototyping, or maybe I will stick
with the plan before. I will see. Good thing I&amp;rsquo;m keeping this blog,
because I tend to forget each syntax before I get to use it again.&lt;/p&gt;

&lt;p&gt;For sake of documentation, I did the following:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Updated &lt;code&gt;config.yaml&lt;/code&gt;:&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  # Additions for nanoc-git: http://graysky.org/2008/12/git-branch-auto-tracking/
  deploy:
    default:
      dst_remote: pages
      dst_branch: master
      src_branch: source
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Installed nanoc-git:&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;   gem install nanoc-git
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Edited &lt;code&gt;Rakefile&lt;/code&gt;&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  require ‘nanoc-git/tasks’
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Then, to execute: `rake deploy:git&amp;rsquo; should &lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Clean the nanoc site&lt;/li&gt;
  &lt;li&gt;Check out the source (&lt;code&gt;source&lt;/code&gt;) from &lt;code&gt;git&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Compile the site using &lt;code&gt;nanoc&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Check out the destination (&lt;code&gt;master&lt;/code&gt;) from &lt;code&gt;git&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Copy all the files from the &lt;code&gt;output/&lt;/code&gt; folder to the root of
&lt;code&gt;master&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Commit in &lt;code&gt;git&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Push to the remote &lt;code&gt;master&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Check the source back out&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;A possible workflow could be:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Edit the file 
git add &amp;lt;file&amp;gt;
git commit 
rake co  #this is my prototyping (sitecopy) rake

# Check: ok?

rake deploy:git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or another option:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Edit the file 
rake co  #this is my prototyping (sitecopy) rake

# Check: ok?

git add &amp;lt;file&amp;gt;
git commit 

rake deploy:git
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=”getting-a-domain-name”&gt;Getting a domain name&lt;/h1&gt;

&lt;p&gt;I registered &lt;code&gt;pragti.ch&lt;/code&gt; at &lt;a href=”http://nic.ch”&gt;nic.ch&lt;/a&gt; and organized a
free DNS service to do the DNS hosting. Then, tried to set up the
CNAME following
&lt;a href=”https://help.github.com/articles/setting-up-a-custom-domain-with-pages”&gt;the documentation at Github&lt;/a&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git checkout master
vi CNAME
# just one line: 
# pragti.ch

git add CNAME
git commit
git push pages
git checkout source
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Did not work immediately, but many times DNS can take some time to
update. Let&amp;rsquo;s wait and see.&lt;/p&gt;
</content></entry><entry><id>tag:members.home.nl,2012-06-22:/pragtich/kippycam/network-layout.html</id><title type="html">Getting network access in the garden</title>
<published>2012-06-21T22:00:00Z</published><updated>2012-06-21T22:00:00Z</updated><link rel="alternate" href="http://members.home.nl/pragtich/kippycam/network-layout.html">
<content type="html">&lt;h1 id=”the-problem”&gt;The problem&lt;/h1&gt;

&lt;p&gt;The garden is quite long and goes around a bend. The house has an extension towards the back that blocks most lines of sight between the garden and the main house. Also, the distance from the services entry point and the shed where the chickens live, runs in the tens of meters. Here&amp;rsquo;s an overview of the situation:&lt;/p&gt;

&lt;p&gt;&lt;img src=”gardenlayout.jpg” alt=”Layout of the garden” /&gt;&lt;/p&gt;

&lt;p&gt;The best way would be to dig a pipe through the garden and wire with ethernet. But this would involve digging up 20 meters of paving, and 20 meters of grass. Although it needs to be done some day (to get water and electricity in the garden, for one thing), now is not the time. So &amp;mdash; wireless is the way to go!&lt;/p&gt;

&lt;h1 id=”layout”&gt;Layout&lt;/h1&gt;

&lt;p&gt;To get a wifi signal at the shed, the existing infrastructure in the house is insufficient. It only reaches roughly 10 meters into the garden. Too many walls, too many trees and leaves. &lt;/p&gt;

&lt;p&gt;An extra access  point is needed. In the first place I will create a wireless repeater, because this has worked before. Later, I may relocate the repeater to a place where I can reach it with Ethernet: that would be a more elegant solution in the long run.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TODO&lt;/strong&gt;: Research &lt;a href=”http://www.rubyinside.com/ruby-graphviz-data-visualization-1477.html”&gt;Railroad&lt;/a&gt; for creating really nice plots.&lt;/p&gt;

&lt;p&gt;The ouline is as follows:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Main Router  ==&amp;gt;	Repeater	==&amp;gt;		Webcam server
Airport		 	TL-WR703N			TL-WR703N
DHCP server		relay wlan-wlan			relay wlan-lan
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=”openwrt-configuration”&gt;OpenWRT configuration&lt;/h1&gt;

&lt;h2 id=”repeater”&gt;Repeater&lt;/h2&gt;

&lt;p&gt;I used the &lt;code&gt;luci&lt;/code&gt; webinterface to configure relaying. Setting this up goes something like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;opkg update
opkg install luci luci-proto-relay
  	# this auto-installs many dependencies, including relayd and uhttpd
  	/etc/init.d/uhttpd enable
  	/etc/init.d/uhttpd start
  	/etc/init.d/relayd enable		# This is required in trunk versions
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, &lt;code&gt;luci&lt;/code&gt; should be up and running by sending the browser to the router&amp;rsquo;s IP address (most likely &lt;code&gt;192.168.1.1&lt;/code&gt;). &lt;/p&gt;

&lt;p&gt;A reasonably clear guide to configuring relaying through &lt;code&gt;luci&lt;/code&gt; is given on &lt;a href=”http://trac.gateworks.com/wiki/relayd”&gt;this page at gateworks.com&lt;/a&gt;. Only trouble is, that this example is for relaying between &lt;code&gt;lan&lt;/code&gt; and &lt;code&gt;wwan&lt;/code&gt;. I started ambitiously, trying to relay to both &lt;code&gt;lan&lt;/code&gt; and a new &lt;code&gt;wifi AP&lt;/code&gt;, but this stranded in the complications of it. Start easy.
Also disable security first. This cost me an afternoon, because &lt;code&gt;psk2&lt;/code&gt; and the &lt;code&gt;auto&lt;/code&gt; cypher setting were not playing nicely with OS X.&lt;/p&gt;

&lt;p&gt;TODO: Add my own nice pictures of how wifi relaying works.&lt;/p&gt;

&lt;p&gt;Another place to check for instructions is &lt;a href=”https://forum.openwrt.org/viewtopic.php?pid=163262#p163262”&gt;In the forums&lt;/a&gt;, but be careful. For one, the &lt;code&gt;trunk&lt;/code&gt; releases need an additional &lt;code&gt;/etc/init.d/relayd enable&lt;/code&gt;. Also, some of the &lt;code&gt;wireless&lt;/code&gt; settings are outdated. The essence is good.&lt;/p&gt;

&lt;p&gt;Something very confusing is the IP address choice for the interface that is not directly connected to the &amp;lsquo;live&amp;rsquo; network. So the &amp;lsquo;access point&amp;rsquo; network in this case. It gets a static address by definition, but this address is largely ignored. Actually, the relayd passes all traffic from the outside network to the internal network. This includes DHCP requests, which also get passed on and get answered by the Main Router. So in fact all clients on both sides of the relay use IP addresses from the Main Router&amp;rsquo;s subnet. Setting the IP address of the &amp;lsquo;inside&amp;rsquo; network to a different subnet helps in case the &amp;lsquo;outside&amp;rsquo; network is unavailable or does not provide DHCP. Then, we need this &amp;lsquo;inside&amp;rsquo; subnet in order to gain access to the router.&lt;/p&gt;

&lt;h2 id=”webcam-server”&gt;Webcam server&lt;/h2&gt;

&lt;p&gt;The webcam server follows &lt;a href=”http://trac.gateworks.com/wiki/relayd”&gt;the instructions at gateworks.com&lt;/a&gt; mostly literally. I kept the &lt;code&gt;lan&lt;/code&gt; IP at &lt;code&gt;192.168.1.1&lt;/code&gt;, simply because there was no real reason to change it. Relay is overkill here, but I chose it because it allows any potential clients on the &lt;code&gt;LAN&lt;/code&gt; interface (wired clients) to join in the network as if nothing was in between. &lt;/p&gt;

&lt;p&gt;TODO: Add description of mjpg-server in additional page and link here&lt;/p&gt;

&lt;h1 id=”physical-network”&gt;Physical network&lt;/h1&gt;

&lt;p&gt;The wireless repeater helps bridging the distance between the house and the shed, but it does rely on &amp;lsquo;line of sight&amp;rsquo;. And even with a clear line of sight (which I do not have, there are tree leaves and a roof partially in the way), the distance is still significant. I took several steps that I intend to document separately:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Convert the TL-WR703N routers to add external antenna connectors.&lt;/li&gt;
  &lt;li&gt;Construct &lt;code&gt;cantennas&lt;/code&gt; to have better gain and a more efficient (narrower) beam.&lt;/li&gt;
  &lt;li&gt;Place the antennas where there is optimal line of sight&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;At present, this is enough to cover my needs with limited bandwidth, but acceptable reliability. After researching a bit, cantennas seem to be over-hyped. Maybe I will build yagi or other high gain antennas at a later date. For now, the cans are working.&lt;/p&gt;
</content></entry><p>&lt;/feed&gt;</p>

<p>And created <code>content/atom.yaml</code> with:</p>

<pre><code>title: Joris Pragt's blog feed
author_name: Joris Pragt
author_uri: http://members.home.nl/pragtich
is_hidden: true
</code></pre>

<p>Edited <code>Rules</code> to add:</p>

<pre><code>compile '/atom/' do
  filter :erb
end

route '/atom/' do
  '/atom.xml'
end
</code></pre>

<p>Maruku threw some errors. Switched to Kramdown and all is well. </p>

<p>I was confused for a while, because no orange icon was showing. Turns out that Firefox has removed the RSS feed icon from the toolbar. You can add it with <code>customize</code>, but even then it is oly black and gray. Not such a clear message anymore, compared to the old way.</p>
 
</bodytext><footer></footer></article><titleframe><titlebar><div id="largetitle"> <a href="../">Pragtich</a>
</div>

 <div id="secnav">

 </div>
 <div id="artnav">
 </div> 
 </titlebar></titleframe><nav><h2>Categories</h2>
      <ul>
<li>
<a href="../all_Computer%20stuff.html">Computer stuff</a> </li>



   <li>
<a href="../all_Life.html">Life</a> </li>



   <li>
<a href="../all_Kippycam.html">Kippycam</a> </li>



      </ul>
<h2>About</h2>
      <ul>
<li><a href="../about/">About me</a></li>
      </ul></nav>
</body>
</html>
